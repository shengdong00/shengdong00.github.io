<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>快速上手科学工程计算集群 | Sheng Dong&#39;s website</title>
<meta name="keywords" content="">
<meta name="description" content="与科学工程计算集群进行交互需要在校园网中，或者开启西湖大学VPN客户端。">
<meta name="author" content="Sʜᴇɴɢ Dong">
<link rel="canonical" href="https://dong2000.xyz/post/secc_quick_guide/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.877d957fe02b1f7a031f35ea12de4515376d4fbd294b218d11e0647d4224857d.css" integrity="sha256-h32Vf&#43;ArH3oDHzXqEt5FFTdtT70pSyGNEeBkfUIkhX0=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.4cb6dde7293c7202004d8e5b0ff189900e27092e3785ab1323830eead980667b.js" integrity="sha256-TLbd5yk8cgIATY5bD/GJkA4nCS43hasTI4MO6tmAZns="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://dong2000.xyz/ptr.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://dong2000.xyz/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://dong2000.xyz/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://dong2000.xyz/apple-touch-icon.png">
<link rel="mask-icon" href="https://dong2000.xyz/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://dong2000.xyz/post/secc_quick_guide/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MT6FEG7LK4"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-MT6FEG7LK4', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="快速上手科学工程计算集群" />
<meta property="og:description" content="与科学工程计算集群进行交互需要在校园网中，或者开启西湖大学VPN客户端。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dong2000.xyz/post/secc_quick_guide/" /><meta property="og:image" content="https://dong2000.xyz/ptr.png"/><meta property="article:section" content="post" />
<meta property="article:published_time" content="2025-09-29T20:10:08+08:00" />
<meta property="article:modified_time" content="2025-09-29T20:10:08+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://dong2000.xyz/ptr.png"/>

<meta name="twitter:title" content="快速上手科学工程计算集群"/>
<meta name="twitter:description" content="与科学工程计算集群进行交互需要在校园网中，或者开启西湖大学VPN客户端。"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://dong2000.xyz/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "快速上手科学工程计算集群",
      "item": "https://dong2000.xyz/post/secc_quick_guide/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "快速上手科学工程计算集群",
  "name": "快速上手科学工程计算集群",
  "description": "与科学工程计算集群进行交互需要在校园网中，或者开启西湖大学VPN客户端。\n",
  "keywords": [
    ""
  ],
  "articleBody": "与科学工程计算集群进行交互需要在校园网中，或者开启西湖大学VPN客户端。\n登录集群 1  ssh @172.16.78.132 -p    其中端口可选12021, 10002, 10003, 10004。\n登录密码采用TOTP动态密码，密码每30秒自动重置，用户通过手机应用FreeOTP查询实时动态密码。\n输入exit即退出登录节点。\n数据传输和文件管理 在终端中交互 数据传输 用wget/curl下载互联网资源到集群的示例：\n1 2 3  # In any login nodes wget https://www.gnu.org/graphics/heckert_gnu.transp.small.png -O gnu.png curl https://www.gnu.org/graphics/heckert_gnu.transp.small.png -o gnu.png   用scp将本地文件上传到集群：\n1 2 3 4 5  # In user's local computer shell scp -P file_to_upload @172.16.78.132:/path/to/save # upload to cluster # In any login nodes scp -P file_to_download @local IP:/path/to/save # download to user's local computer   需要动态密码验证。\n文件管理 其他一些常用的Shell命令：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32  # 列出目录内容 ls # 列出目录内容，包括隐藏文件 ls -a # 创建空文件 touch newfile.txt # 复制文件 cp file.txt /home/user/Documents # 删除文件 rm unwantedfile.txt # 创建目录 mkdir /home/user/new_directory # 删除空目录 rmdir /home/user/empty_directory # 显示目录树 tree /home/user/ # 递归删除非空文件夹 rm -r foldername # 递归强制删除，不接收提示 rm -rf foldername # 递归强制删除，同时接收提示 rm -rvf foldername   图形化客户端 本地与集群之间的数据传输，以及集群上的文件管理，可以使用FileZilla图形化客户端进行。\n主机：sftp://172.16.78.132\n连接自动断开的超时时间默认为20秒，可以在设置中自定义。\n但传输文件的自动断开时间强制为20秒。超时后需要重新输入动态密码才能再次传输文件。\n实际使用中发现传输文件夹时容易反复提示输入动态密码，因此建议先单独传一个小文件来输入动态密码，然后将其余文件或文件夹一次性上传。\nNOTE：由于使用动态账号密码，需要禁止SFTP客户端自动保存密码！\nMiniconda3管理环境 在home目录下安装Miniconda3\n1 2 3  cd ~ wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh bash Miniconda3-latest-Linux-x86_64.sh   所有选项选yes，会将Miniconda安装到~/miniconda3/路径下。\n更换镜像源需要修改~/.condarc文件，然后执行conda clean -i并回复yes。\n为了避免每次登录集群都需要source ~/.bashrc才能执行conda命令，在~/.bash_profile文件中添加：\n1  echo '. ~/anaconda3/etc/profile.d/conda.sh'  ~/.bash_profile   创建新的Python环境：\n1 2  conda create -n py3 python=3.12 conda activate py3   其他一些conda的常见使用命令：\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  # 在当前conda环境中安装软件包最新版，或指定版本 conda install [=] # 在当前conda环境中删除软件包 conda remove # 列出当前conda环境中已安装的软件包 conda list # 列出已有的conda环境名称 conda info -e # 退出当前conda环境，返回上一个conda环境 conda deactivate # 删除制定的conda环境 conda remove -n --all # 当家目录空间不足时，删除历次下载的软件包等缓存，可以极大的节省存储空间 conda clean --all   提交任务 临时调试 1 2  # In any login nodes srun --pty bash   系统会分配计算资源，自动跳转登录到分配的computing node中，可以临时进行交互计算任务。默认资源参数：intel-sc3分区、1个CPU、2.5G总内存、无GPU，无时间限制。\n用户执行exit即退出登录的computing节点，回到login节点，系统将自动释放分配的计算资源。\n用户直接断开连接（网络中断、直接关闭终端窗口等）可能导致srun任务继续在后台运行，用stat_job命令查看任务状态。\n后台提交 Slurm作业脚本 脚本示例（my_job.sh）：\n1 2 3 4 5 6 7 8 9 10 11 12  #!/usr/bin/env bash  #SBATCH -J job_name # Job name #SBATCH -p amd-ep2,intel-sc3 # Select partition #SBATCH -q normal # Select QOS #SBATCH -c 32 # Set CPU number #SBATCH --mem=32G # Default is 2.5G memory per CPU core. This parameter changes the value from 20G to 64G source ~/.bashrc conda activate py3 cd python main.py   常用Slurm参数：\n   参数 说明     -c 申请CPU核心数量，默认为1，不能单个节点的核心上限   --mem 申请的总内存大小，默认为每个CPU核心2.5G   -p 指定computing节点分区，可以使用逗号指定多个分区   -q 指定QOS   -o 自定义任务标准输出（日志）文件   -e 自定义任务标准错误输出（错误日志）文件   -a 例如-a 1-100的参数会提交一组共100个相同的任务，每个子任务中的环境变量${SLURM_ARRAY_TASK_ID}则分别为1-100的单独数字 (?)    提交和查看作业 提交脚本：\n1  sbatch my_job.sh   脚本提交后，任务即进入排队阶段，当有符合条件的系统资源时，任务将自动开始执行。任务执行的标准输出结果（一般为运行日志）将输出到脚本提交路径下的slurm-.out文件中\n查询本用户正在排队/运行的任务：\n1 2  # In any login nodes stat_job      任务状态 含义     PD 排队中   R 运行中   S 暂停中   CG 即将完成    修改排队中的任务的参数：\n1 2 3 4 5 6 7 8 9 10  # In any login nodes # 修改任务分区 scontrol update jobid=partition=# 修改任务QOS scontrol update jobid=qos= # 修改任务CPU核心数，等同srun/sbatch参数-c scontrol update jobid=CPUsPerTask=  取消并删除任务：\n1 2  # In any login nodes scancel   查询分区资源和状态：\n1 2  # In any login nodes stat_partition   部分计算节点分区的说明：\n   分区名称 computing节点规格     amd-ep2 64核 amd CPU, 480G内存, QOS: normal/huge, 配有SSD缓存/data   amdepyc 64核 amd CPU, 480G内存, QOS: normal/huge   amd-ep2-short 64核 amd CPU, 480G内存, QOS: normal/huge, 使用时间上限为1天   intel-sc3(默认分区) 64核 amd CPU, 480G内存, QOS: normal/huge, 配有SSD缓存/data   intel-sc3-32c 64核 amd CPU, 480G内存, QOS: normal/huge, 任务必须使用32整倍数的CPU核心    部分Quality of Service (QOS)的说明：\n   QOS 优先级 说明     normal 高 总任务提交数   huge 低 总任务提交数   ",
  "wordCount" : "506",
  "inLanguage": "en",
  "datePublished": "2025-09-29T20:10:08+08:00",
  "dateModified": "2025-09-29T20:10:08+08:00",
  "author":{
    "@type": "Person",
    "name": "Sʜᴇɴɢ Dong"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dong2000.xyz/post/secc_quick_guide/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Sheng Dong's website",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dong2000.xyz/ptr.png"
    }
  }
}
</script>




</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://dong2000.xyz" accesskey="h" title="波忒利 (Alt + H)" style="font-size:1.2em;">
                <img src="https://dong2000.xyz/ptr.png" alt="" aria-label="logo"
                    height="40">波忒利</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://dong2000.xyz/profile/" title="Profile"
                            aria-label="Profile">Profile</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://dong2000.xyz/archives/" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="https://dong2000.xyz/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://dong2000.xyz/links/" title="Links">
                    <span>Links</span>
                </a>
            </li>
            <li>
                <a href="https://dong2000.xyz/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header><main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://dong2000.xyz">Home</a>&nbsp;»&nbsp;<a href="https://dong2000.xyz/post/">Posts</a></div>
    <h1 class="post-title">
      快速上手科学工程计算集群
    </h1>
    <div class="post-meta">

<span title='2025-09-29 20:10:08 +0800 CST'>September 29, 2025</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Sʜᴇɴɢ Dong&nbsp;·&nbsp;

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#%e7%99%bb%e5%bd%95%e9%9b%86%e7%be%a4" aria-label="登录集群">登录集群</a></li>
                    <li>
                        <a href="#%e6%95%b0%e6%8d%ae%e4%bc%a0%e8%be%93%e5%92%8c%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" aria-label="数据传输和文件管理">数据传输和文件管理</a><ul>
                            
                    <li>
                        <a href="#%e5%9c%a8%e7%bb%88%e7%ab%af%e4%b8%ad%e4%ba%a4%e4%ba%92" aria-label="在终端中交互">在终端中交互</a><ul>
                            
                    <li>
                        <a href="#%e6%95%b0%e6%8d%ae%e4%bc%a0%e8%be%93" aria-label="数据传输">数据传输</a></li>
                    <li>
                        <a href="#%e6%96%87%e4%bb%b6%e7%ae%a1%e7%90%86" aria-label="文件管理">文件管理</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%9b%be%e5%bd%a2%e5%8c%96%e5%ae%a2%e6%88%b7%e7%ab%af" aria-label="图形化客户端">图形化客户端</a></li></ul>
                    </li>
                    <li>
                        <a href="#miniconda3%e7%ae%a1%e7%90%86%e7%8e%af%e5%a2%83" aria-label="Miniconda3管理环境">Miniconda3管理环境</a></li>
                    <li>
                        <a href="#%e6%8f%90%e4%ba%a4%e4%bb%bb%e5%8a%a1" aria-label="提交任务">提交任务</a><ul>
                            
                    <li>
                        <a href="#%e4%b8%b4%e6%97%b6%e8%b0%83%e8%af%95" aria-label="临时调试">临时调试</a></li>
                    <li>
                        <a href="#%e5%90%8e%e5%8f%b0%e6%8f%90%e4%ba%a4" aria-label="后台提交">后台提交</a><ul>
                            
                    <li>
                        <a href="#slurm%e4%bd%9c%e4%b8%9a%e8%84%9a%e6%9c%ac" aria-label="Slurm作业脚本">Slurm作业脚本</a></li>
                    <li>
                        <a href="#%e6%8f%90%e4%ba%a4%e5%92%8c%e6%9f%a5%e7%9c%8b%e4%bd%9c%e4%b8%9a" aria-label="提交和查看作业">提交和查看作业</a>
                    </li>
                </ul>
                </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>
  <div class="post-content"><p>与科学工程计算集群进行交互需要在校园网中，或者开启<a href="https://vpn.westlake.edu.cn/">西湖大学VPN客户端</a>。</p>
<h2 id="登录集群">登录集群<a hidden class="anchor" aria-hidden="true" href="#登录集群">#</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-0-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-0-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">ssh &lt;user name&gt;@172.16.78.132 -p &lt;port&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>其中端口可选12021, 10002, 10003, 10004。</p>
<p>登录密码采用TOTP动态密码，密码每30秒自动重置，用户通过手机应用FreeOTP查询实时动态密码。</p>
<p>输入<code>exit</code>即退出登录节点。</p>
<h2 id="数据传输和文件管理">数据传输和文件管理<a hidden class="anchor" aria-hidden="true" href="#数据传输和文件管理">#</a></h2>
<h3 id="在终端中交互">在终端中交互<a hidden class="anchor" aria-hidden="true" href="#在终端中交互">#</a></h3>
<h4 id="数据传输">数据传输<a hidden class="anchor" aria-hidden="true" href="#数据传输">#</a></h4>
<p>用wget/curl下载互联网资源到集群的示例：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-1-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-1">1</a>
</span><span class="lnt" id="hl-1-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-2">2</a>
</span><span class="lnt" id="hl-1-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-1-3">3</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">wget https://www.gnu.org/graphics/heckert_gnu.transp.small.png -O gnu.png
</span></span><span class="line"><span class="cl">curl https://www.gnu.org/graphics/heckert_gnu.transp.small.png -o gnu.png
</span></span></code></pre></td></tr></table>
</div>
</div><p>用scp将本地文件上传到集群：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-2-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-1">1</a>
</span><span class="lnt" id="hl-2-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-2">2</a>
</span><span class="lnt" id="hl-2-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-3">3</a>
</span><span class="lnt" id="hl-2-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-4">4</a>
</span><span class="lnt" id="hl-2-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-2-5">5</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In user&#39;s local computer shell</span>
</span></span><span class="line"><span class="cl">scp -P &lt;port, usually 12021&gt; file_to_upload &lt;user name&gt;@172.16.78.132:/path/to/save <span class="c1"># upload to cluster</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">scp -P &lt;port, usually 22&gt; file_to_download &lt;user name&gt;@&lt;<span class="nb">local</span> IP&gt;:/path/to/save <span class="c1"># download to user&#39;s local computer</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>需要动态密码验证。</p>
<h4 id="文件管理">文件管理<a hidden class="anchor" aria-hidden="true" href="#文件管理">#</a></h4>
<p>其他一些常用的Shell命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-3-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-1"> 1</a>
</span><span class="lnt" id="hl-3-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-2"> 2</a>
</span><span class="lnt" id="hl-3-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-3"> 3</a>
</span><span class="lnt" id="hl-3-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-4"> 4</a>
</span><span class="lnt" id="hl-3-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-5"> 5</a>
</span><span class="lnt" id="hl-3-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-6"> 6</a>
</span><span class="lnt" id="hl-3-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-7"> 7</a>
</span><span class="lnt" id="hl-3-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-8"> 8</a>
</span><span class="lnt" id="hl-3-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-9"> 9</a>
</span><span class="lnt" id="hl-3-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-10">10</a>
</span><span class="lnt" id="hl-3-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-11">11</a>
</span><span class="lnt" id="hl-3-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-12">12</a>
</span><span class="lnt" id="hl-3-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-13">13</a>
</span><span class="lnt" id="hl-3-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-14">14</a>
</span><span class="lnt" id="hl-3-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-15">15</a>
</span><span class="lnt" id="hl-3-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-16">16</a>
</span><span class="lnt" id="hl-3-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-17">17</a>
</span><span class="lnt" id="hl-3-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-18">18</a>
</span><span class="lnt" id="hl-3-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-19">19</a>
</span><span class="lnt" id="hl-3-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-20">20</a>
</span><span class="lnt" id="hl-3-21"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-21">21</a>
</span><span class="lnt" id="hl-3-22"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-22">22</a>
</span><span class="lnt" id="hl-3-23"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-23">23</a>
</span><span class="lnt" id="hl-3-24"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-24">24</a>
</span><span class="lnt" id="hl-3-25"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-25">25</a>
</span><span class="lnt" id="hl-3-26"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-26">26</a>
</span><span class="lnt" id="hl-3-27"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-27">27</a>
</span><span class="lnt" id="hl-3-28"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-28">28</a>
</span><span class="lnt" id="hl-3-29"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-29">29</a>
</span><span class="lnt" id="hl-3-30"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-30">30</a>
</span><span class="lnt" id="hl-3-31"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-31">31</a>
</span><span class="lnt" id="hl-3-32"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-3-32">32</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 列出目录内容</span>
</span></span><span class="line"><span class="cl">ls
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 列出目录内容，包括隐藏文件</span>
</span></span><span class="line"><span class="cl">ls -a
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建空文件</span>
</span></span><span class="line"><span class="cl">touch newfile.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 复制文件</span>
</span></span><span class="line"><span class="cl">cp file.txt /home/user/Documents
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除文件</span>
</span></span><span class="line"><span class="cl">rm unwantedfile.txt
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 创建目录</span>
</span></span><span class="line"><span class="cl">mkdir /home/user/new_directory
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除空目录</span>
</span></span><span class="line"><span class="cl">rmdir /home/user/empty_directory
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 显示目录树</span>
</span></span><span class="line"><span class="cl">tree /home/user/
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 递归删除非空文件夹</span>
</span></span><span class="line"><span class="cl">rm -r foldername
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 递归强制删除，不接收提示</span>
</span></span><span class="line"><span class="cl">rm -rf foldername
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 递归强制删除，同时接收提示</span>
</span></span><span class="line"><span class="cl">rm -rvf foldername
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="图形化客户端">图形化客户端<a hidden class="anchor" aria-hidden="true" href="#图形化客户端">#</a></h3>
<p>本地与集群之间的数据传输，以及集群上的文件管理，可以使用FileZilla图形化客户端进行。</p>
<p>主机：<code>sftp://172.16.78.132</code></p>
<p>连接自动断开的超时时间默认为20秒，可以在设置中自定义。</p>
<p>但传输文件的自动断开时间强制为20秒。超时后需要重新输入动态密码才能再次传输文件。</p>
<p>实际使用中发现传输文件夹时容易反复提示输入动态密码，因此建议先单独传一个小文件来输入动态密码，然后将其余文件或文件夹一次性上传。</p>
<p><strong>NOTE：由于使用动态账号密码，需要禁止SFTP客户端自动保存密码！</strong></p>
<h2 id="miniconda3管理环境">Miniconda3管理环境<a hidden class="anchor" aria-hidden="true" href="#miniconda3管理环境">#</a></h2>
<p>在home目录下安装Miniconda3</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-4-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-1">1</a>
</span><span class="lnt" id="hl-4-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-2">2</a>
</span><span class="lnt" id="hl-4-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-4-3">3</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">cd</span> ~
</span></span><span class="line"><span class="cl">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
</span></span><span class="line"><span class="cl">bash Miniconda3-latest-Linux-x86_64.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>所有选项选yes，会将Miniconda安装到<code>~/miniconda3/</code>路径下。</p>
<p>更换镜像源需要修改<code>~/.condarc</code>文件，然后执行<code>conda clean -i</code>并回复yes。</p>
<p>为了避免每次登录集群都需要<code>source ~/.bashrc</code>才能执行conda命令，在<code>~/.bash_profile</code>文件中添加：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-5-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-5-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nb">echo</span> <span class="s1">&#39;. ~/anaconda3/etc/profile.d/conda.sh&#39;</span> &gt;&gt; ~/.bash_profile
</span></span></code></pre></td></tr></table>
</div>
</div><p>创建新的Python环境：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-6-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-1">1</a>
</span><span class="lnt" id="hl-6-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-6-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">conda create -n py3 <span class="nv">python</span><span class="o">=</span>3.12
</span></span><span class="line"><span class="cl">conda activate py3
</span></span></code></pre></td></tr></table>
</div>
</div><p>其他一些conda的常见使用命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-7-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-1"> 1</a>
</span><span class="lnt" id="hl-7-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-2"> 2</a>
</span><span class="lnt" id="hl-7-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-3"> 3</a>
</span><span class="lnt" id="hl-7-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-4"> 4</a>
</span><span class="lnt" id="hl-7-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-5"> 5</a>
</span><span class="lnt" id="hl-7-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-6"> 6</a>
</span><span class="lnt" id="hl-7-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-7"> 7</a>
</span><span class="lnt" id="hl-7-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-8"> 8</a>
</span><span class="lnt" id="hl-7-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-9"> 9</a>
</span><span class="lnt" id="hl-7-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-10">10</a>
</span><span class="lnt" id="hl-7-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-11">11</a>
</span><span class="lnt" id="hl-7-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-12">12</a>
</span><span class="lnt" id="hl-7-13"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-13">13</a>
</span><span class="lnt" id="hl-7-14"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-14">14</a>
</span><span class="lnt" id="hl-7-15"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-15">15</a>
</span><span class="lnt" id="hl-7-16"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-16">16</a>
</span><span class="lnt" id="hl-7-17"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-17">17</a>
</span><span class="lnt" id="hl-7-18"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-18">18</a>
</span><span class="lnt" id="hl-7-19"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-19">19</a>
</span><span class="lnt" id="hl-7-20"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-7-20">20</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># 在当前conda环境中安装软件包最新版，或指定版本</span>
</span></span><span class="line"><span class="cl">conda install &lt;soft name&gt;<span class="o">[=</span>&lt;version&gt;<span class="o">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在当前conda环境中删除软件包</span>
</span></span><span class="line"><span class="cl">conda remove &lt;soft name&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 列出当前conda环境中已安装的软件包</span>
</span></span><span class="line"><span class="cl">conda list
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 列出已有的conda环境名称</span>
</span></span><span class="line"><span class="cl">conda info -e
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 退出当前conda环境，返回上一个conda环境</span>
</span></span><span class="line"><span class="cl">conda deactivate
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除制定的conda环境</span>
</span></span><span class="line"><span class="cl">conda remove -n &lt;env name&gt; --all
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 当家目录空间不足时，删除历次下载的软件包等缓存，可以极大的节省存储空间</span>
</span></span><span class="line"><span class="cl">conda clean --all
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="提交任务">提交任务<a hidden class="anchor" aria-hidden="true" href="#提交任务">#</a></h2>
<h3 id="临时调试">临时调试<a hidden class="anchor" aria-hidden="true" href="#临时调试">#</a></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-8-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-1">1</a>
</span><span class="lnt" id="hl-8-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-8-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">srun --pty bash
</span></span></code></pre></td></tr></table>
</div>
</div><p>系统会分配计算资源，自动跳转登录到分配的computing node中，可以临时进行交互计算任务。默认资源参数：intel-sc3分区、1个CPU、2.5G总内存、无GPU，无时间限制。</p>
<p>用户执行<code>exit</code>即退出登录的computing节点，回到login节点，系统将自动释放分配的计算资源。</p>
<p>用户直接断开连接（网络中断、直接关闭终端窗口等）可能导致srun任务继续在后台运行，用<code>stat_job</code>命令查看任务状态。</p>
<h3 id="后台提交">后台提交<a hidden class="anchor" aria-hidden="true" href="#后台提交">#</a></h3>
<h4 id="slurm作业脚本">Slurm作业脚本<a hidden class="anchor" aria-hidden="true" href="#slurm作业脚本">#</a></h4>
<p>脚本示例（<code>my_job.sh</code>）：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-9-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-1"> 1</a>
</span><span class="lnt" id="hl-9-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-2"> 2</a>
</span><span class="lnt" id="hl-9-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-3"> 3</a>
</span><span class="lnt" id="hl-9-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-4"> 4</a>
</span><span class="lnt" id="hl-9-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-5"> 5</a>
</span><span class="lnt" id="hl-9-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-6"> 6</a>
</span><span class="lnt" id="hl-9-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-7"> 7</a>
</span><span class="lnt" id="hl-9-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-8"> 8</a>
</span><span class="lnt" id="hl-9-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-9"> 9</a>
</span><span class="lnt" id="hl-9-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-10">10</a>
</span><span class="lnt" id="hl-9-11"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-11">11</a>
</span><span class="lnt" id="hl-9-12"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-9-12">12</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="cp">#!/usr/bin/env bash
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="c1">#SBATCH -J job_name            # Job name</span>
</span></span><span class="line"><span class="cl"><span class="c1">#SBATCH -p amd-ep2,intel-sc3   # Select partition</span>
</span></span><span class="line"><span class="cl"><span class="c1">#SBATCH -q normal              # Select QOS</span>
</span></span><span class="line"><span class="cl"><span class="c1">#SBATCH -c 32                  # Set CPU number</span>
</span></span><span class="line"><span class="cl"><span class="c1">#SBATCH --mem=32G              # Default is 2.5G memory per CPU core. This parameter changes the value from 20G to 64G</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">source</span> ~/.bashrc
</span></span><span class="line"><span class="cl">conda activate py3
</span></span><span class="line"><span class="cl"><span class="nb">cd</span> &lt;file path&gt;
</span></span><span class="line"><span class="cl">python main.py
</span></span></code></pre></td></tr></table>
</div>
</div><p>常用Slurm参数：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>-c</code></td>
<td>申请CPU核心数量，默认为1，不能单个节点的核心上限</td>
</tr>
<tr>
<td><code>--mem</code></td>
<td>申请的总内存大小，默认为每个CPU核心2.5G</td>
</tr>
<tr>
<td><code>-p</code></td>
<td>指定computing节点分区，可以使用逗号指定多个分区</td>
</tr>
<tr>
<td><code>-q</code></td>
<td>指定QOS</td>
</tr>
<tr>
<td><code>-o</code></td>
<td>自定义任务标准输出（日志）文件</td>
</tr>
<tr>
<td><code>-e</code></td>
<td>自定义任务标准错误输出（错误日志）文件</td>
</tr>
<tr>
<td><code>-a</code></td>
<td>例如<code>-a 1-100</code>的参数会提交一组共100个相同的任务，每个子任务中的环境变量<code>${SLURM_ARRAY_TASK_ID}</code>则分别为1-100的单独数字 <em>(?)</em></td>
</tr>
</tbody>
</table>
<h4 id="提交和查看作业">提交和查看作业<a hidden class="anchor" aria-hidden="true" href="#提交和查看作业">#</a></h4>
<p>提交脚本：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-10-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-10-1">1</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">sbatch my_job.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p>脚本提交后，任务即进入排队阶段，当有符合条件的系统资源时，任务将自动开始执行。任务执行的标准输出结果（一般为运行日志）将输出到<strong>脚本提交路径</strong>下的<code>slurm-&lt;job id&gt;.out</code>文件中</p>
<p>查询本用户正在排队/运行的任务：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-11-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-1">1</a>
</span><span class="lnt" id="hl-11-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-11-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">stat_job
</span></span></code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>任务状态</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>PD</td>
<td>排队中</td>
</tr>
<tr>
<td>R</td>
<td>运行中</td>
</tr>
<tr>
<td>S</td>
<td>暂停中</td>
</tr>
<tr>
<td>CG</td>
<td>即将完成</td>
</tr>
</tbody>
</table>
<p>修改排队中的任务的参数：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-12-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-1"> 1</a>
</span><span class="lnt" id="hl-12-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-2"> 2</a>
</span><span class="lnt" id="hl-12-3"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-3"> 3</a>
</span><span class="lnt" id="hl-12-4"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-4"> 4</a>
</span><span class="lnt" id="hl-12-5"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-5"> 5</a>
</span><span class="lnt" id="hl-12-6"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-6"> 6</a>
</span><span class="lnt" id="hl-12-7"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-7"> 7</a>
</span><span class="lnt" id="hl-12-8"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-8"> 8</a>
</span><span class="lnt" id="hl-12-9"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-9"> 9</a>
</span><span class="lnt" id="hl-12-10"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-12-10">10</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改任务分区</span>
</span></span><span class="line"><span class="cl">scontrol update <span class="nv">jobid</span><span class="o">=</span>&lt;job id&gt; <span class="nv">partition</span><span class="o">=</span>&lt;partition name&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改任务QOS</span>
</span></span><span class="line"><span class="cl">scontrol update <span class="nv">jobid</span><span class="o">=</span>&lt;job id&gt; <span class="nv">qos</span><span class="o">=</span>&lt;QOS&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 修改任务CPU核心数，等同srun/sbatch参数-c</span>
</span></span><span class="line"><span class="cl">scontrol update <span class="nv">jobid</span><span class="o">=</span>&lt;job id&gt; <span class="nv">CPUsPerTask</span><span class="o">=</span>&lt;CPU number&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>取消并删除任务：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-13-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-1">1</a>
</span><span class="lnt" id="hl-13-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-13-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">scancel &lt;job id&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>查询分区资源和状态：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt" id="hl-14-1"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-1">1</a>
</span><span class="lnt" id="hl-14-2"><a style="outline: none; text-decoration:none; color:inherit" href="#hl-14-2">2</a>
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># In any login nodes</span>
</span></span><span class="line"><span class="cl">stat_partition
</span></span></code></pre></td></tr></table>
</div>
</div><p>部分计算节点分区的说明：</p>
<table>
<thead>
<tr>
<th style="text-align:left">分区名称</th>
<th style="text-align:left">computing节点规格</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">amd-ep2</td>
<td style="text-align:left">64核 amd CPU, 480G内存, QOS: normal/huge, 配有SSD缓存/data</td>
</tr>
<tr>
<td style="text-align:left">amdepyc</td>
<td style="text-align:left">64核 amd CPU, 480G内存, QOS: normal/huge</td>
</tr>
<tr>
<td style="text-align:left">amd-ep2-short</td>
<td style="text-align:left">64核 amd CPU, 480G内存, QOS: normal/huge, 使用时间上限为1天</td>
</tr>
<tr>
<td style="text-align:left">intel-sc3(默认分区)</td>
<td style="text-align:left">64核 amd CPU, 480G内存, QOS: normal/huge, 配有SSD缓存/data</td>
</tr>
<tr>
<td style="text-align:left">intel-sc3-32c</td>
<td style="text-align:left">64核 amd CPU, 480G内存, QOS: normal/huge, 任务必须使用32整倍数的CPU核心</td>
</tr>
</tbody>
</table>
<p>部分Quality of Service (QOS)的说明：</p>
<table>
<thead>
<tr>
<th>QOS</th>
<th>优先级</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>normal</td>
<td>高</td>
<td>总任务提交数&lt;=1000，总任务同时运行数&lt;=30，总任务同时使用CPU核心&lt;=200</td>
</tr>
<tr>
<td>huge</td>
<td>低</td>
<td>总任务提交数&lt;=20000，总任务同时使用CPU核心&lt;=1600</td>
</tr>
</tbody>
</table>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="next" href="https://dong2000.xyz/post/addressing_context_dependence_in_ecology/">
    <span class="title">Next »</span>
    <br>
    <span>Context dependence 是一句万金油吗 (文献分享)</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022-2025 <a href="https://dong2000.xyz">Sheng Dong&#39;s website</a></span>
    <span id="busuanzi_container_site_count">
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>.
    
    
        
        &nbsp;&nbsp;本页访问量=<span id="busuanzi_value_page_pv"></span>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body>

</html>
